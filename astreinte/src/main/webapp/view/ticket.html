<!DOCTYPE html>
<html>
<body>
	<form prenom="ticketform">
		<table>
			<tr>

				<td><label>QC *</label></td>
				<td><input type="text" ng-model="ticket.qc" /></td>
				<td><label>Libelle *</label></td>
				<td><input type="text" ng-model="ticket.libelle" /></td>
			</tr>
			<tr>

				<td><label>CP *</label></td>
				<td><select ng-model="ticket.cp.id">
						<option ng-repeat="mgr in mangersList" value="{{mgr.id}}">{{mgr.nom}}</option>
				</select></td>
				<td></td>
				<td></td>
			</tr>
			<tr>

				<td><label>PMO *</label></td>
				<td><select ng-model="ticket.pmo.id">
						<option ng-repeat="mgr in mangersList" value="{{mgr.id}}">{{mgr.nom}}</option>
				</select></td>
				<td></td>
				<td></td>
			</tr>

			<tr>

				<td><label>FO *</label></td>
				<td><select ng-model="ticket.fo.id">
						<option ng-repeat="mgr in mangersList" value="{{mgr.id}}">{{mgr.nom}}</option>
				</select></td>
				<td></td>
				<td></td>
			</tr>
			<tr>

				<td><label>DIR *</label></td>
				<td><select ng-model="ticket.dir.id">
						<option ng-repeat="mgr in mangersList" value="{{mgr.id}}">{{mgr.nom}}</option>
				</select></td>
				<td></td>
				<td></td>
			</tr>
			<tr>
				<td></td>
				<td></td>

				<td><input type="submit" value="save" ng-click="save()"
					ng-disabled="ticketform.$invalid" /></td>
				<td><input type="reset" value="clear" ng-click="reset()" /></td>
				<td></td>
			</tr>
		</table>
	</form>

	<fieldset>
		<table border="1">
			<tr>
				<td>Id</td>
				<td>QC</td>
				<td>Libelle</td>
				<td>CP</td>
				<td>PMO</td>

				<td colspan="2">Action</td>
			</tr>
			<tr ng-repeat="astr in listTicket track by $index">
				<td><a href ng-click="edit(astr)"> {{astr.id}} </a></td>
				<td>{{astr.qc}}</td>
				<td>{{astr.libelle}}</td>
				<td>{{astr.cp.nom}}</td>
				<td>{{astr.pmo.nom}}</td>
				<td>

					<div class="jumbotron">
	
		<table class="table table-striped" >
		<thead>
			<tr>
				<th>Id</th>
				<th>QC</th>
				<th>Name</th>
				<th>LastName</th>
				<th>Date</th>
				<th>Debut</th>
				<th>Fin</th>
				<th>K</th>
				<th>Charge</th>
				<th>Action</th>
			</tr>
			</thead>
			<tr ng-repeat="astre in astr.atreintes track by $index">
				<td><a href ng-click="edit(astr)"> {{astr.id}} </a></td>
				<td>{{listeTickets[astre.idQC].qc}}</td>
				<td>{{astre.ressource.prenom}}</td>
				<td>{{astre.ressource.nom}}</td>
				<td>{{astre.dateAstreinte | date :"dd/MM/yyyy"}}</td>
				<td>{{astre.hdebut | date : 'hh:mm:00'}}</td>
				<td>{{astre.hfin | date:"hh:mm:00"}}</td>

				<td>{{astre.k}}</td>
				<td>{{astre.charge | number:2}}</td>
				<td><a href ng-click="remove(astr)">Remover</a></td>
			</tr>
			<tfoot>
			<tr>
			<th colspan="8">Charge Totale</th>
			<th>{{calculate(astr.listAstreinte)  | number:2}}</th>
			<th>JH</th>
			</tr>
			</tfoot>
		</table>
</div>

				</td>
				<td><a href ng-click="remove(astr)">Remover</a></td>
			</tr>
		</table>
	</fieldset>

	<a href="/#/astreinte">Astreinte</a>
	<a href="/#/ticket">Ticket</a>
</body>
</html>