<!DOCTYPE html>
<html>
<body>
	<form prenom="astreinteform">
	<div class="row">
	<div class="col-sm-2" style="background-color:lavender;">QC[{{astreinte.id}}]</div>			
	<div class="col-sm-2" style="background-color:lavender;"><select ng-model="astreinte.idQC" ng-options="tck.id as tck.qc for tck in listeTickets" ></select></div>
	</div>
	<div class="row">
	<div class="col-sm-2" style="background-color:lavender;">Ressource</div>
	<div class="col-sm-2" style="background-color:lavender;"><select ng-model="astreinte.ressource.id" ng-options="res.id as res.nom group by res.role for res in listeRessources" ></select></div>
		</div>
		
	<div class="row">
	<div class="col-sm-2" style="background-color:lavender;">Type Astreinte</div>
	<div class="col-sm-2" style="background-color:lavender;"><select ng-model="astreinte.typeAstreinte.id" ng-options="tp.id as tp.libelle for tp in typesAstreinteList" ></select></div>
	</div>
	
	<div class="row">
	<div class="col-sm-2" style="background-color:lavender;">Date</div>
	<div class="col-sm-2" style="background-color:lavender;"><input type="date" ng-model="astreinte.dateAstreinte" ng-required="true" /></div>
	</div>
	
	<div class="row">
	<div class="col-sm-1" style="background-color:lavender;">Debut</div>
	<div class="col-sm-1" style="background-color:lavender;"><input type="time" ng-model="astreinte.hdebut" /></div>

	<div class="col-sm-1" style="background-color:lavender;">Fin</div>
	<div class="col-sm-1" style="background-color:lavender;"><input type="time" ng-model="astreinte.hfin" /></div>
	</div>
	
	<div class="row">
	<div class="col-sm-2" style="background-color:lavender;"><input type="submit" value="save" ng-click="save()" ng-disabled="astreinteform.$invalid" /></div>
	<div class="col-sm-2" style="background-color:lavender;"><input type="reset" value="clear" ng-click="reset()" /></div>
	</div>
			

	</form>

	<fieldset>
		<table border="1">
			<tr>
				<td>Id</td>
				<td>QC</td>
				<td>Name</td>
				<td>LastName</td>
				<td>Date</td>
				<td>Debut</td>
				<td>Fin</td>
				<td>K</td>
				<td>Charge</td>
				<td>Action</td>
			</tr>
			<tr ng-repeat="astr in listAstreinte track by $index">
				<td><a href ng-click="edit(astr)"> {{astr.id}} </a></td>
				<td>{{astr.idQC}}</td>
				<td>{{astr.ressource.prenom}}</td>
				<td>{{astr.ressource.nom}}</td>
				<td>{{astr.dateAstreinte | date :"dd/MM/yyyy"}}</td>
				<td>{{astr.hdebut | date : 'hh:mm:00'}}</td>
				<td>{{astr.hfin | date:"hh:mm:00"}}</td>

				<td>{{astr.k}}</td>
				<td>{{astr.charge | number:2}}</td>
				<td><a href ng-click="remove(astr)">Remover</a></td>
			</tr>
			<tr>
			<td colspan="8">Charge Totale</td>
			<td>{{calculate(listAstreinte)  | number:2}}</td>
			<td>%</td>
			</tr>
		</table>
	</fieldset>
	<a href="/#/astreinte">Astreinte</a>
	<a href="/#/ticket">Ticket</a>
</body>
</html>